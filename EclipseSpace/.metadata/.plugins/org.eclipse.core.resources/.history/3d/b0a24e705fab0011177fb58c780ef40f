import sys
import os
import fnmatch
import shutil

json_file_pattern = '*.json'

def recursive_directory_content_move(root, where_to_move):
    for each_entry in os.listdir(root):
        if os.path.isdir(os.path.join(root,each_entry)):
            recursive_directory_content_move(os.path.join(root,each_entry), where_to_move)
        for each_file in files_next:
            try:
                if fnmatch.fnmatch(each_file, json_file_pattern):
                    shutil.move(os.path.join(root,each_file), os.path.join(where_to_move,each_file))
            except shutil.Error, e:
                continue
        
            
    

if(len(sys.argv) > 1):
    for root, dirs, files in os.walk(sys.argv[1]):
        os.chdir(sys.argv[1])
        for dir in dirs:
            print dir
#                message_ids = {}
#            fb_wall_last_value = fb_wall_last_value + 1
#            for root_next, dirs_next, files_next in os.walk(dir):
#                for each_dir in dirs_next:
#                    if os.path.isdir(each_dir):
#                        os.chdir(each_dir)
#                for each_file in files_next:
#                    json_strings = open (each_file)
##                if os.path.isdir(os.path.join(dir)
            entries = os.listdir(dir)
            tmp_dir = dir
            for each_entry in entries:
                if os.path.isdir(os.path.join(tmp_dir,each_entry)):
                    os.rename(dir, 'temp')
                    tmp_dir = 'temp'
                    os.mkdir(dir)
                    recursive_directory_content_move(os.path.join(sys.argv[1], 'temp'), os.path.join(sys.argv[1], dir))
                    os.rmdir('temp')
                    break
            for each_file in os.listdir(dir):
#                    open(sys.argv[1]+"temp.json", "w").close() #To empty the file
#                    FILE = open (sys.argv[1]+"temp.json", "a")
#                        print (sys.argv[1]+dir+'/'+each_file)
                json_strings = open (sys.argv[1]+dir+'/'+each_file)
#                    working_json_file_name = dir+'/'+each_file
#                    raw_input('press a key')
#                    describe_this(json_strings)
#                    FILE.close()
else:
    print('Give a path for Json directories')
